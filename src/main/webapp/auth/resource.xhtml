<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml"
                xmlns:framework="http://java.sun.com/jsf/composite/components">
    <ui:define name="breadCrum">
        <p:menuitem value="Dashboard" url="#"/>
        <p:menuitem value="#{msg['security']['resource']}" outcome="/auth/resource"/>
    </ui:define>
    <ui:define name="head">
        <script>
            function selectedResourceType() {
                let type = PF('type').getJQ().find(':checked').val();
                PF("resourceUrl").hide();
                PF("resourceTarget").hide();
                PF("resourcePermission").hide();
                PF("resourceSeq").hide();
                PF("iconPlane").hide();
                PF("resourceVisible").hide();
                switch (type) {
                    case 'CATALOG' :
                        PF("resourceSeq").show();
                        PF("iconPlane").show();
                        PF("resourceVisible").show();
                        break;
                    case 'MENU' :
                        PF("resourceUrl").show();
                        PF("resourceTarget").show();
                        PF("resourcePermission").show();
                        PF("resourceSeq").show();
                        PF("iconPlane").show();
                        PF("resourceVisible").show();
                        break;
                    case 'BUTTON' :
                        PF("resourcePermission").show();
                        PF("resourceSeq").show();
                        break;
                }
            }
        </script>
    </ui:define>
    <ui:define name="content">
        <h:form id="contentForm">
            <framework:treeTable id="resourceTreeTable" widgetVar="resourceTreeTable"
                                 value="#{viewScope.resources}" formDialogId="resource"
                                 singleSelection="#{viewScope.singleNode}" resizableColumns="true"
                                 multipleSelection="#{viewScope.multipleNodes}">
                <f:facet name="toolbarBtn">
                    <p:commandButton id="expandBtn" icon="fa #{viewScope.isExpand ? 'fa-expand' : 'fa-compress'}"
                                     value="#{msg['resource']['expand']}" action="#{controller.onToggleExpand}"
                                     update="@widgetVar(resourceTreeTable) @this"/>
                </f:facet>
                <p:column headerText="#{msg['resource']['name']}">
                    <i class="#{element.icon}" style="padding-right: 5px;"/>
                    <h:outputText value="#{element.name}"/>
                </p:column>
                <p:column priority="4" headerText="#{msg['resource']['seq']}">
                    <h:outputText value="#{element.seq}"/>
                </p:column>
                <p:column priority="2" headerText="#{msg['resource']['url']}">
                    <h:outputText value="#{element.url}"/>
                </p:column>
                <p:column priority="2" headerText="#{msg['resource']['type']}">
                    <h:outputText value="#{element.type}"/>
                </p:column>
                <p:column priority="3" headerText="#{msg['resource']['visible']}">
                    <p:toggleSwitch value="#{element.visible}">
                        <p:ajax listener="#{controller.onChangeStatus(element)}"/>
                    </p:toggleSwitch>
                </p:column>
                <p:column priority="4" headerText="#{msg['resource']['permission']}">
                    <h:outputText value="#{element.permission}"/>
                </p:column>
            </framework:treeTable>
        </h:form>
    </ui:define>
    <ui:define name="dialog">

    </ui:define>
</ui:composition>